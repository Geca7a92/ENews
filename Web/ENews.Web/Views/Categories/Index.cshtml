@model ENews.Web.ViewModels.SubCategories.MainCategoryArticlesViewModel

@{
    this.ViewData["Title"] = Model.Title;
}
<h1>Hello From @Model.Title</h1>

<div class="container-fluid">
    <div class="row">
        <div class="col-md-8">
            <div class="row p-md-3">
                <div class="col">
                    @foreach (var article in Model.CategoryArticles)
                    {
                        <div class="row p-md-1">
                            @await Html.PartialAsync("_ArticlePartial", article)
                        </div>
                    }
                </div>
            </div>
            <div class="row p-md-3 justify-content-center">
                <nav class="center">
                    <ul class="pagination justify-content-center">

                        @*Previous page*@
                        @if (this.Model.CurrentPage == 1)
                        {
                            <li class="page-item disabled m-1">
                                <a class="page-link" href="#">Previous</a>
                            </li>
                        }

                        else
                        {
                            <li class="page-item m-1">
                                <a class="page-link"
                                   asp-route="category"
                                   asp-route-name="@this.Model.Title"
                                   asp-route-page="@(this.Model.CurrentPage - 1)">Previous</a>
                            </li>
                        }

                        @*First page*@
                        @if (this.Model.CurrentPage != 1)
                        {
                            <li class="page-item m-1">
                                <a class="page-link"
                                   asp-route="category"
                                   asp-route-name="@this.Model.Title"
                                   asp-route-page="1">1</a>
                            </li>
                        }

                        @*Pages before current page*@
                        @for (int i = this.Model.CurrentPage - 2; i < this.Model.CurrentPage; i++)
                        {
                            @if (i > 1)
                            {
                                <li class="page-item m-1">
                                    <a class="page-link"
                                       asp-route="category"
                                       asp-route-name="@this.Model.Title"
                                       asp-route-page="@i">@i</a>
                                </li>
                            }
                        }

                        @*Current page*@
                        @{
                            <li class="page-item active m-1">
                                <a class="page-link"
                                   asp-route="category"
                                   asp-route-name="@this.Model.Title"
                                   asp-route-page="@this.Model.CurrentPage">@this.Model.CurrentPage</a>
                            </li>
                        }

                        @*Pages after current page*@
                        @for (int i = this.Model.CurrentPage + 1; i <= this.Model.CurrentPage + 2; i++)
                        {
                            @if (i < this.Model.PagesCount)
                            {

                                <li class="page-item m-1">
                                    <a class="page-link"
                                       asp-route="category"
                                       asp-route-name="@this.Model.Title"
                                       asp-route-page="@i">@i</a>
                                </li>
                            }
                        }

                        @*Last page*@
                        @if (this.Model.CurrentPage != this.Model.PagesCount)
                        {
                            <li class="page-item m-1">
                                <a class="page-link"
                                   asp-route="category"
                                   asp-route-name="@this.Model.Title"
                                   asp-route-page="@(this.Model.PagesCount)">@this.Model.PagesCount</a>
                            </li>
                        }

                        @*Next page*@
                        @if (this.Model.CurrentPage == this.Model.PagesCount)
                        {
                            <li class="page-item disabled m-1">
                                <a class="page-link" href="#">Next</a>
                            </li>
                        }
                        else
                        {
                            <li class="page-item m-1">
                                <a class="page-link"
                                   asp-route="category"
                                   asp-route-name="@this.Model.Title"
                                   asp-route-page="@(this.Model.CurrentPage + 1)">Next</a>
                            </li>
                        }
                    </ul>
                </nav>
            </div>
        </div>
        <div class="col-md-4">
            <div class="row pt-3 pb-2">
                <vc:get-local-last-five-articles></vc:get-local-last-five-articles>
            </div>
            <div class="row">
                <vc:latest-most-viewed-articles></vc:latest-most-viewed-articles>
            </div>
        </div>
    </div>
</div>